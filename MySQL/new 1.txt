-- procedure practice


1.
       delimiter //
       create procedure netsum33(in empid int, out netsum float(9,2))
       begin
       declare vsal float(9,2);
       declare vcomm float(9,2); 
       declare netsal float(9,2); 
       select sal, comm into vsal, vcomm from emp where empno = empid;
       set netsum = vsal + ifnull(vcomm, 0);
	 
       end //
	

2.
	delimiter //
	create procedure cat( in no int , out remark varchar(40) )
	begin
	if no > 10 then set remark="Greater than Ten ";
	else set remark="Other";
	end if;
	end //
	delimiter ;
	
3.  

delimiter //
create procedure ccommm( in empid int )
begin
declare vsal float(9,2);
declare vcomm float(9,2);
declare netsum float(9,2);

select sal ,comm into vsal,vcomm from emp ;

set netsum=vsal + ifnull(vcomm,0);

select ename,sal,comm,netsum from emp;

end //
delimiter ;


4.

1. Declare cursor.
 
 -- declare empcur cursor for select empno, ename from emp;
 
2. declare continue handler to stop the loop

-- declare continue handler for NOT FOUND set vset=1;

3. open the cursor.

-- open cursor 

4. fetch the row from the cursor.
5. check whether reached to last row leave the loop
6. process the row.
7. goto step 4
8. once come out of the loop then close the cursor.


  lable1:loop 
        fetch empcur into vempno, vname;
		
		if vset=1 then 
		   leave lable1;
		end if;
		
		select vemp,vname;
		
	end loop;
	close empcur;
end //
delimiter ;

 5.
 
 delimiter //
 
 
	create function f1( ehiredate  date) returns int 
 begin
 
 declare exp int ;
 set exp=  floor((datediff(curdate(),ehiredate))/365);
 return exp;
 
 end //
  delimiter ;
  
  
  delimiter //

create function f2(ehiredate date) returns int
begin
    declare exp int;
    set exp = floor((datediff(curdate(), ehiredate)) / 365);
    return exp;
end //

delimiter ;






	
		

